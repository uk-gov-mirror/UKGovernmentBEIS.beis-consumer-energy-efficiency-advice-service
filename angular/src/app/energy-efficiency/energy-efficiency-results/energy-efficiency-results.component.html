<app-spinner-and-error-container [loading]="isLoading" [error]="isError" [errorMessage]="errorMessage"></app-spinner-and-error-container>
<div class="results-page" *ngIf="!isLoading && !isError">
    <div class="page-row results-header-row">
        <div class="page-row-content">
            <h1 class="heading-text">Now build your plan</h1>
            <div class="header-data-cards">
                <app-data-card
                        heading="Your current score is"
                        [value]="energyCalculations.currentScore"
                        colorCircleClassName="amber"
                        isVerticalAtMobile="true"
                ></app-data-card>
                <app-data-card
                        heading="Your estimated monthly bills are"
                        [value]="'Â£' + energyCalculations.currentMonthlyBillPoundsRounded"
                        isVerticalAtMobile="true"
                ></app-data-card>
                <app-data-card
                        heading="CO2 emissions per year (tonnes)"
                        [value]="energyCalculations.currentCo2EmissionsPerYearTonnes"
                ></app-data-card>
            </div>
        </div>
    </div>
    <div class="page-row recommendations">
        <div class="page-row-content">
            <div class="recommendations-heading">
                Choose from the following recommendations
            </div>
            <div class="recommendations-subheading">
                We've selected our top recommendations but you can filter by the following:
            </div>
            <div class="recommendations-filter">
                <app-recommendation-filter-control
                        [(selectedTags)]="activeTagFilters"
                        (selectedTagsChange)="sendEventToAnalytics('filter_clicked')"
                ></app-recommendation-filter-control>
            </div>
            <div class="recommendation-cards">
                <app-energy-efficiency-recommendation-card
                        *ngFor="let recommendation of getDisplayedRecommendations()"
                        [recommendation]="recommendation"
                        [showMonthlySavings]="showMonthlySavings"
                ></app-energy-efficiency-recommendation-card>
            </div>
        </div>
    </div>
    <app-sticky-row-wrapper>
        <app-your-plan-footer
                (onDoPlan)="sendEventToAnalytics('do_clicked')"
        ></app-your-plan-footer>
    </app-sticky-row-wrapper>
</div>
